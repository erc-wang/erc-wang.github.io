<!DOCTYPE html>
<html>
<head>
    <title>My Portfolio</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
    </style>
</head>
<body>
    <h1>Project 4: [Auto]Stitching Photo Mosaics</h1>
    <h3>About</h3>
    <p>This project is split into two parts with the first one covering how to warp an image, and mosaicing, effectively allowing someone to stitch images together based on correspondence points</p>
    <h3>Shoot and Digitize Pictures</h3>
    <p>I took some pictures of the outdoors on a trip, but for the next part I will definitely take a few more especially ones of the indoors</p>
    <table>
        <tr>
            <td>
                <img src="images/image4_resized.jpg" width="800" height="600">
            </td>
            <td>
                <img src="images/image2_resized.jpg" width="800" height="600">
            </td>
        </tr>
        <tr>
            <td>
                <img src="images/upward1.jpg" width="960" height="540">
            </td>
            <td>
                <img src="images/upward1.jpg" width="960" height="540">
            </td>
        </tr>
    </table>
    <p>The images are selected and taken intentionally so that some elements overlap from picture to picture</p>
    <h3>Recover Homographies</h3>
    <p>Using the same correspondence tool provided by the spec of project 3. I labeled corresponding points from a pair of images using their clicking tool.</p>
    <p>The calculation for the homography matrix, is effectively solving b = HA for H.</p>
    <p>In this equation, b is the resulting point locations, A is the initial source image point locations, and H is the homography matrix, a 3x3 transforming matrix</p>
    <p>Matrices A and b are required to be homogenous matrices, where each column must end with a 1 following the x and y coordinates of a point. As a result of this, when using the homography matrix we must divide all entries by their final column entry.</p>
    <p>We can find this homography matrix by using least squares</p>
    <h3>Warp the Images / Image Rectification</h3>
    <p>Using the homography matrix calculated in the previous part, we can essentially warp any coordinates from the original image to its corresponding warped version (placing the point to its position within the perspective of the base image)</p>
    <p>We can take the initial corners of the original image and warp them to get the boundaries of the resulting warped image. From here we can following a similar process used in project 3 by using skimage.draw.polygon to get all of the points within the new boundaries</p>
    <p>We can then interpolate the points from the initial image to its corresponding position in the warped image bounds</p>
    <p>My warpImage function still has some issues on determining the new boundaries and as a result, some of the images later may not follow the correct dimensions</p>
    <p>This process of warping can be used to rectify photos by placing them within the perspective of another image. By manually selecting 4 corner points we can take a slanted object and return it to a rectangular position.</p>
    <table>
        <tr>
            <td>
                <img src="images/macbook.jpg" width="800" height="600">
            </td>
            <td>
                <img src="output/rectify1.jpg" width="800" height="600">
            </td>
        </tr>
        <tr>
            <td>
                <img src="images/book.jpg" width="600" height="800">
            </td>
            <td>
                <img src="output/rectify2.jpg" width="800" height="800">
            </td>
        </tr>
    </table>
    <h3>Blending Images into a Mosaic</h3>
    <p>Using the previous steps, we can combine images into a singular image called a mosaic (similar to a panorama). This can be done by calculating the size of the resulting image by finding the maximum resolutions of the warped images and adding their offsets based on how much their correspondence points become altered between warps</p>
    <p>To blend the images, I used a Laplacian pyramid for the blending scheme, however it caused some artifacts to appear along the edges of the mask created. I read on ed that some people were able to solve this issue using bwdist, however this is not a function in Python and I was not able to find a working altenative</p>
    <table>
        <tr>
            <td>
                <img src="output/mosaic1.jpg" width="1500" height="600">
            </td>
        </tr>
        <tr>
            <td>
                <img src="output/mosaic2.jpg" width="1500" height="600">
            </td>
        </tr>
    </table>
</body>
</html>
